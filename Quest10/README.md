# Quest 10. 인증의 이해

## Introduction

- 이번 퀘스트에서는 웹에서의 인증에 관해 알아보겠습니다.

## Topics

- Cookie
- Session
- JWT

## Resources

- [MDN - HTTP 쿠키](https://developer.mozilla.org/ko/docs/Web/HTTP/Cookies)
- [Cookies and Sessions](https://web.stanford.edu/~ouster/cgi-bin/cs142-fall10/lecture.php?topic=cookie)
- [JWT](https://jwt.io/)

## Checklist

- 쿠키란 무엇일까요?
  > 쿠키란 서버가 사용자의 웹 브라워저에 전송하는 작은 데이터 조각이다.
  > 사용자PC local에 저장되는 token(key,value로 이루어진 문자열 데이터)파일이며, 통신이 1회성이 HTTP의 단점을 보완하기 위해 고안된 개념이다.
  > 유효시간 범위 내에서는 정보가 저장되어, 주로 사용자 인증을 유지하는데(로그인 지속,인증,장바구니 접속 등)을 활용한다.
  - 쿠키는 어떤 식으로 동작하나요?
    > 1. 클라이언트가 페이지를 요청
    > 2. 서버에서 쿠키를 생성
    > 3. HTTP 헤더에 쿠키를 포함 시켜 응답
    > 4. 브라우저가 종료되어도 쿠키 만료 기간이 있다면 클라이언트에서 보관하고 있음
    > 5. 같은 요청을 할 경우 HTTP 헤더에 쿠키를 함께 보냄
    > 6. 서버에서 쿠키를 읽어 이전 상태 정보를 변경 할 경우가 있을 때 쿠키를 업데이트 하여 변경된 쿠키를 HTTP 헤더에 포함시켜 응답
  - 쿠키는 어떤 식으로 서버와 클라이언트 사이에 정보를 주고받나요?
    > 위와 같음
- 웹 어플리케이션의 세션이란 무엇일까요?
  > 쿠키와 마찬가지로 사용자 정보 저장 및 인증 등에 활용하기 위해 key,value로 이루어진 문자열 데이터이다.
  > 쿠키는 기본적으로 많은 트랙픽을 발생시키고 보안에 취약한다는 문제가 있는데, 이러한 단점을 보완하기 위해 session_id(식별자)를 넣고 해다 server/DB에 저장한다.
  - 세션의 ID와 내용은 각각 어디에 저장되고 어떻게 서버와 교환되나요?
    > 세션 ID는 쿠키에, 내용은 서버에 저장한다.
    >
    > 1.  클라이언트가 서버에 접속 시 세션 ID를 발급 받음
    > 2.  클라이언트는 세션 ID에 대해 쿠키를 사용해서 저장하고 가지고 있음
    > 3.  클라이언트는 서버에 요청할 때, 이 쿠키의 세션 ID를 같이 서버에 전달해서 요청
    > 4.  서버는 세션 ID를 전달받아서 별다른 작없이 세션 ID로 세션에 있는 클라이언트 정보를 가져와서 사용
    > 5.  클라이언트 정보를 가지고 서버 요청을 처리하여 클라이언트에게 응답
- JWT란 무엇인가요?
  > JSON Web Token, 사용자의 속성과 정보를 Header/Payload/Signature로 분할하여 암호화한 토큰이다.
  - JWT 토큰은 어디에 저장되고 어떻게 서버와 교환되나요?
    > localStorage/cookie 둘 중 하나에 저장한다.
    > localStorage:csrf 공격에는 어는정도 안전하다. requset에 담기는 쿠키와 다르게 js코드에 의해 헤더에 담기므로 xss를 둟지 않는 이상 공격자가 정상적인 사용자인 척 request를 보내기 어렵다. 하지만 xss에는 매우 취약하다.
    > cookie:cookie는 javascript로 접근 불가능하여 localstorage만큼 xss공격에 취약하지 않다. 하지만 xss 공격으로부터 완전하게 안전한 것은 아니다. 또한 csrf 공격에 취약하다. 플래그를 사용하면 어느정도 예방이 된다.
- 세션에 비해 JWT가 가지는 장점은 무엇인가요? 또 JWT에 비해 세션이 가지는 장점은 무엇인가요?
  > JWT은 client 측에 저장하는 데이터로, server 측에서 별도의 저장 공간을 필요로 하지 않는다.
  > 세션은 JWT에 비해 구현이 상대적으로 쉽다.

## Quest

- 이번에는 메모장 시스템에 로그인 기능을 넣고자 합니다.
  - 사용자는 딱 세 명만 존재한다고 가정하고, 아이디와 비밀번호, 사용자의 닉네임은 하드코딩해도 무방합니다.
  - 로그인했을 때 해당 사용자가 이전에 작업했던 탭들과 마지막으로 활성화된 탭 등의 상태가 로딩 되어야 합니다.
  - 세션을 이용한 버전과, JWT를 이용한 버전 두 가지를 만들어 보세요!
    - 세션을 이용할 경우 세션은 서버의 메모리나 파일에 저장하면 됩니다.

## Advanced

- Web Authentication API(WebAuthn)은 무엇인가요?
